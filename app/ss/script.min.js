var abFunctions=function(){var gThis=this;this.IsJsonString=function(str){try{JSON.parse(str)}catch(e){return!1}return!0},Array.prototype.unique=function(){for(var unique=[],i=0;i<this.length;i++)-1==unique.indexOf(this[i])&&unique.push(this[i]);return unique},this.uniqueName=function(origName,entireArray,k,elem){k="undefined"!=typeof k?k:1,elem="undefined"!=typeof elem?elem:"name";var tempName=(origName+k).toString(),result=tempName;return entireArray.forEach(function(arr,i){tempName==arr[elem]&&(k++,result=gThis.uniqueName(origName,entireArray,k,elem))}),result},this.swapItems=function(tArray,a,b){var varA=tArray[a],varB=tArray[b];return tArray[a]=varB,tArray[b]=varA,tArray},this.isJsonString=function(str){try{JSON.parse(str)}catch(e){return!1}return!0},this.aBMainOrig=function(){var tempObj={menus:[{label:"Posts",type:"post",name:"posts",unique:!0,children:[]},{label:"Pages",type:"page",name:"pages",unique:!0,children:[]},{label:"Sidebars",type:"sidebars",name:"sidebars",unique:!0,pageTitle:"Custom Sidebar",pageDescription:"Custom Sidebar Description",capability:"manage_options",handler:"ab_menu_handler",children:[]},{label:"Rest Routes",type:"restRoutes",name:"restRoutes",unique:!0,children:[]}]};return tempObj},this.downloadInnerFile=function(filename,elId,jsonString,exportType){var elHtml1=document.getElementById(elId+"1").innerHTML,link=document.createElement("a");mimeType="text",jsonString=jsonString.replace(/'/g,"\\'"),jsonString=jsonString.slice(1,jsonString.length-1);var funcString="\n    $theJson = '"+jsonString+"';";elHtml="<?php \n ",elHtml+="    $abError = false;\n",elHtml+="    include_once ABSPATH.'wp-admin/includes/plugin.php';\n",elHtml+="    if (!is_plugin_active('admin-builder/admin-builder.php')) {\n",elHtml+="      if(!function_exists('sample_admin_notice__success'))\n",elHtml+="           {\n",elHtml+="        function sample_admin_notice__success()\n",elHtml+="        {\n",elHtml+="          $pluginInstalled = false;\n",elHtml+="          if (!function_exists('get_plugins')) {\n",elHtml+="            require_once ABSPATH.'wp-admin/includes/plugin.php';\n",elHtml+="          }\n",elHtml+="          $allPlugins = get_plugins();\n",elHtml+="          foreach ($allPlugins as $key => $value) {\n",elHtml+="            if ($key === 'admin-builder/admin_builder.php') {\n",elHtml+="              $pluginInstalled = true;\n",elHtml+="            }\n",elHtml+="           }\n",elHtml+="            if ($pluginInstalled){\n",elHtml+="              if (!is_plugin_active('admin-builder/admin_builder.php')) {\n",elHtml+="                $abError = true;\n",elHtml+="                $url = admin_url();\n",elHtml+="                echo '<div class=\"notice notice-error is-dismissible\">';\n",elHtml+="                echo '<h3>Admin Builder Plugin is not ACTIVE!</h3>';\n",elHtml+="                echo '<p>';\n",elHtml+="                echo 'To get the full functionality , activate Admin Builder from the <a href=\"'.$url.'/plugins.php\">plugins directory</a>.';\n",elHtml+="                echo '</p>';\n",elHtml+="                echo '</div>';\n",elHtml+="              } else {\n",elHtml+="                $theJson = '';\n",elHtml+="              }\n",elHtml+="             } else {\n",elHtml+="              $abError = true;\n",elHtml+="              echo '<div class=\"notice notice-error is-dismissible\">';\n",elHtml+="              echo '<h3>Admin Builder Plugin is not installed!</h3>';\n",elHtml+="              echo '<p>';\n",elHtml+="              echo 'To get the full functionality , install Admin Builder.';\n",elHtml+="              echo '</p>';\n",elHtml+="              echo '<p>';\n",elHtml+="              $plugin_name = 'admin-builder';\n",elHtml+="              $install_link = '<a href=\"'.esc_url(network_admin_url('plugin-install.php?tab=plugin-information&amp;plugin='.$plugin_name.'&amp;TB_iframe=true&amp;width=600&amp;height=550')).'\" class=\"thickbox\" title=\"More info about '.$plugin_name.'\">Install '.$plugin_name.'</a>';\n",elHtml+="              echo $install_link;\n",elHtml+="              echo '</p>';\n",elHtml+="              echo '</div>';\n",elHtml+="             }\n",elHtml+="            }\n",elHtml+="            add_action('admin_notices', 'sample_admin_notice__success');\n",elHtml+="           }\n",elHtml+="           }\n",elHtml+="           if (!$abError) {\n","theme"===exportType&&(elHtml+="    $pathToSource = realpath(dirname(__FILE__));\n",elHtml+="    if (strpos($pathToSource, 'themes') !== false) {\n",elHtml+="        $my_theme = wp_get_theme();\n",elHtml+="        $themeData['Version'] = $my_theme->get( 'Version' );\n",elHtml+="        $themeData['Name'] = $my_theme->get( 'Name' );\n",elHtml+="    }"),elHtml+=elHtml1+funcString+"\n",elHtml+="if(class_exists('generalFunctionality')){\n",elHtml+="    $abGeneral = new generalFunctionality();\n","plugin"===exportType&&(elHtml+="    $abGeneral->loadNew($theJson,$plugin_folder[$plugin_file]);\n"),"theme"===exportType&&(elHtml+="    $abGeneral->loadNew($theJson,$themeData);\n"),elHtml+="    }\n",elHtml+="   }\n",elHtml=unescape(elHtml),elHtml=elHtml.replace("&gt;",">"),elHtml=elHtml.replace("&gt;",">"),elHtml=elHtml.replace("||if1||","if(isset($_GET['action']) && $_GET['action']==='install-plugin' && isset($_GET['plugin']) && $_GET['plugin']==='admin-builder'){return;}"),link.setAttribute("download",filename),link.setAttribute("href","data:text;data:attachment/php;charset=utf-8,"+encodeURIComponent(elHtml)),link.click()}},OpenInNewTab=function(url){var win=window.open(url,"_blank");win.focus()},stripslashes=function(str){return(str+"").replace(/\\(.?)/g,function(s,n1){switch(n1){case"\\":return"\\";case"0":return"\x00";case"":return"";default:return n1}})};window.addEventListener("beforeunload",function(e){var confirmationMessage="o/";return(e||window.event).returnValue=confirmationMessage,confirmationMessage}),function(){var abFunc=new abFunctions,debug=!1,aB=angular.module("aBMain",["ui.bootstrap","ngAnimate","ngStorage","ngRoute"]);aB.run(function($rootScope,$templateCache){$rootScope.$on("$viewContentLoaded",function(){$templateCache.removeAll()})}),debug&&console.log("Module aBMain initiated"),aB.directive("ngEnter",function(){return function(scope,element,attrs){element.bind("keydown keypress",function(event){13===event.which&&(scope.$apply(function(){scope.$eval(attrs.ngEnter)}),event.preventDefault())})}}),aB.config(function($routeProvider){$routeProvider.when("/",{templateUrl:"templates/login.html"}).when("/login",{templateUrl:"templates/login.html"}).when("/projects",{templateUrl:"templates/projects.html"}).when("/project/:id",{templateUrl:"templates/content.html"}).when("/export",{templateUrl:"templates/export.html"}).when("/register",{templateUrl:"templates/register.html"}).when("/newProject",{templateUrl:"templates/newProject.html"}).when("/editProject/:id",{templateUrl:"templates/editProject.html"}).when("/editProject",{templateUrl:"templates/newProject.html"}).when("/resetPassword",{templateUrl:"templates/resetPassword.html"}).when("/account",{templateUrl:"templates/account.html"}).when("/contact",{templateUrl:"templates/contact.html"}).when("/terms-and-conditions",{templateUrl:"templates/terms-and-conditions.html"}).otherwise({redirectTo:"/"})});aB.controller("mainCtrl",["$scope","$log","$http","$localStorage","$httpParamSerializerJQLike","$location","$routeParams",function($scope,$log,$http,$localStorage,$httpParamSerializerJQLike,$location,$routeParams){$http.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8",debug&&$log.log("mainCtrl controller  initiated"),$scope.isCollapsed=!0,$scope.codeCollapsed=!0,$scope.isFieldCollapsed=!0,$scope.eShow=!1,$scope.menuEditSettShow=!1,$scope.selMI=void 0,$scope.fieldModel="default",$scope.mBoxSett=!1,$scope.mboxFields=!0,$scope.aBIE="Json goes here",$scope.alerts=[],$scope.contentTemplate="",$scope.headerTemplate="",$scope.rUName="",$scope.menuAdd="default",$scope.metaboxText="Metabox",$scope.rootPath="",$scope.loadingOverlay=!1,$scope.pTitle="",$scope.pDescription="",$scope.lEmail="",$scope.testResponse="",$scope.regexMail=/(^\s*$|^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.(?:[a-zA-Z]{2}|com|org|net|edu|gov|mil|biz|info|mobi|name|aero|asia|jobs|museum)$)/,$scope.regexPass=/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\$%\^&\*])(?=.{8,})/,$scope.lEmailBool=!0,$scope.lPassword="",$scope.lPassword2="",$scope.strongPassword="",$scope.vHeader=!1,$scope.mainContainer="templates/metaboxContainer-0.1.5.html",$scope.abExtraEditFields="",$scope.aBMain=new abFunc.aBMainOrig,$scope.pEdit=!1,$scope.projectID=null,$scope.userProjects=[],$scope.pEditID=null,$scope.uEmail="",$scope.familyName="",$scope.givenName="",$scope.website="",$scope.shortBio="",$scope.expirationDate="00/00/000",$scope.$on("$locationChangeStart",function(event){var tempPath=$location.path();switch(debug&&console.log(tempPath.indexOf("/projects")),!0){case-1!=tempPath.indexOf("/login"):case"/"==$location.path():$scope.vToken("ftlLogin","/login");break;case-1!=tempPath.indexOf("/projects"):$scope.eShow=!1,$scope.vToken("ftlAllProjects","/login");break;case-1!=tempPath.indexOf("/editProject/"):$scope.vToken("ftlEditProject","/login");break;case-1!=tempPath.indexOf("/project/"):$scope.vToken("ftlLoadProject","/login");break;case-1!=tempPath.indexOf("/account"):$scope.eShow=!1,$scope.vToken("ftlAccount","/login");break;case-1!=tempPath.indexOf("/contact"):$scope.vToken("ftlContact","/login");break;case-1!=tempPath.indexOf("/splash"):document.location="http://admin-builder.com/splash"}}),$scope.abGoTo=function(urlPath){$location.path(urlPath)},$scope.isloggedIn=function(){return!!$localStorage.loginToken},$scope.contentSwitch=function(boolVar){$scope.eShow=boolVar,boolVar?($scope.aBIE=JSON.stringify($scope.aBMain),$scope.saveSettings(),$location.path("export")):$location.path("projects"),debug&&console.log($scope.contentTemplate)},$scope.setMenu=function(index,menu){switch($scope.selMI=index,debug&&console.log("Menu type: "+menu.label),menu.type){case"cPage":$scope.mBoxSett=!1,$scope.mboxFields=!0,$scope.metaboxText="Tab",0===menu.children.length&&$scope.addMetabox(menu),1===menu.children.length&&($scope.isCollapsed=!1),$scope.abExtraEditFields="";break;case"widgets":$scope.metaboxText="Widget",$scope.mBoxSett=!1,$scope.mboxFields=!0,$scope.abExtraEditFields="";break;case"sidebars":$scope.metaboxText="Sidebar",$scope.mBoxSett=!0,$scope.mboxFields=!1,$scope.abExtraEditFields="templates/sidebarsEdit-0.0.4.html";break;case"taxonomies":$scope.metaboxText="Taxonomy",$scope.mBoxSett=!1,$scope.mboxFields=!0,$scope.abExtraEditFields="templates/taxonomies-0.0.1.html";break;case"tinyMCE":$scope.metaboxText="Button",$scope.mBoxSett=!1,$scope.mboxFields=!0,$scope.abExtraEditFields="";break;case"restRoutes":$scope.metaboxText="Route",$scope.mBoxSett=!0,$scope.mboxFields=!1,$scope.isCollapsed=!0,$scope.mboxFields=!1,$scope.abExtraEditFields="templates/restRoutes-0.0.5.html";break;case"customizer":$scope.mBoxSett=!1,$scope.mboxFields=!0,$scope.metaboxText="Panel",0===menu.children.length&&$scope.addMetabox(menu),1===menu.children.length&&($scope.isCollapsed=!1),$scope.abExtraEditFields="",$scope.fieldOptions=$scope.customizerFieldOptions;break;case"dWidgets":$scope.metaboxText="Widget",$scope.mBoxSett=!0,$scope.mboxFields=!1,$scope.abExtraEditFields="templates/dashboardWidgets-0.0.1.html";break;default:$scope.mBoxSett=!1,$scope.mboxFields=!0,$scope.isCollapsed=!0,$scope.metaboxText="Metabox",$scope.abExtraEditFields=""}$scope.mainContainer="templates/metaboxContainer-0.1.5.html",$scope.menuEditSettShow=!1},$scope.isMenu=function(index){return $scope.selMI===index},$scope.removeMe=function(tArr,i,allArray){allArray="undefined"!=typeof allArray?allArray:null,tArr.splice(i,1),null!==allArray&&"cPage"===allArray.type&&1===allArray.children.length&&($scope.isCollapsed=!1)},$scope.addMetabox=function(tArr){$scope.isCollapsed=!0;var defMetaBox={label:"Metabox",name:"metabox",context:"normal",priority:"default",fields:[]};switch(tArr.type){case"cPage":defMetaBox.label="Tab",defMetaBox.name="tab";break;case"widgets":defMetaBox.label="Widget",defMetaBox.name="widget";break;case"sidebars":defMetaBox.label="Sidebar",defMetaBox.name="sidebar",defMetaBox.description="Default Description for sidebar",defMetaBox.before_widget_id="%1$s",defMetaBox.before_widget_class="widget %2$s",defMetaBox.before_title_class="widgettitle";break;case"taxonomies":defMetaBox.label="Taxonomy",defMetaBox.name="taxonomy";break;case"tinyMCE":defMetaBox.label="Sidebar",defMetaBox.name="sidebar";break;case"restRoutes":defMetaBox.label="Route",defMetaBox.name="route",defMetaBox.rRMethod="post",defMetaBox.override=!1,defMetaBox.namespace=abFunc.uniqueName(defMetaBox.name,tArr.children)+"Namespace",defMetaBox.route_path="/"+abFunc.uniqueName(defMetaBox.name,tArr.children)+"Route",defMetaBox.callbackFunction="callback_"+abFunc.uniqueName(defMetaBox.name,tArr.children);break;case"customizer":defMetaBox.label="Panel",defMetaBox.name="panel";break;case"dWidgets":defMetaBox.label="Widget",defMetaBox.name="widget"}defMetaBox.name=abFunc.uniqueName(defMetaBox.name,tArr.children),defMetaBox.label=abFunc.uniqueName(defMetaBox.label,tArr.children,1,"label"),tArr.children.push(defMetaBox),debug&&console.log("metabox added!")},$scope.movePosition=function(tArr,index,direction){var oIndex=index,aLength=tArr.length;"up"===direction?index>0?index--:index=aLength-1:"down"===direction&&(aLength-1>index?index++:index=0),tArr=abFunc.swapItems(tArr,oIndex,index)},$scope.addField=function(tArr,fieldModel){var newField={};$scope.fieldOptions.forEach(function(arr,i){arr.type===fieldModel&&(newField={name:arr.name,type:arr.type,label:arr.label,description:arr.description},arr.selectType&&(newField.selectType=arr.selectType),arr.oArr&&(newField.oArr=[]),arr.radioType&&(newField.radioType=arr.radioType),arr.orientation&&(newField.orientation=arr.orientation),arr.format&&(newField.format=arr.format),arr.opacity&&(newField.opacity=arr.opacity),arr.tSizes&&(newField.tSizes=arr.tSizes),arr.extraText&&(newField.extraText=arr.extraText))}),newField.name=abFunc.uniqueName(newField.name,tArr),newField.label=abFunc.uniqueName(newField.label,tArr,1,"label"),tArr.push(newField),debug&&(console.log("Field "+newField.name+" added!"),console.log("Field data:"),console.log(newField)),this.fieldModel="default"},$scope.showHideField=function(field,type,typeVar){return typeVar="undefined"!=typeof typeVar?typeVar:"type",field[typeVar]==type},$scope.aBAddOption=function(tArr){var newOption={label:"",value:""};"undefined"!=typeof tArr&&tArr.push(newOption)},$scope.aBAddOptionSize=function(tArr){var newOption={width:"",height:""};"undefined"!=typeof tArr&&tArr.push(newOption)},$scope.saveSettings=function(showAlert){if(showAlert="undefined"!=typeof showAlert?showAlert:!0,null!==$scope.projectID){$scope.loadingOverlay=!0;var postData={abToken:$localStorage.loginToken,pJson:JSON.stringify($scope.aBMain),pID:$scope.projectID};$http({method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$httpParamSerializerJQLike(postData),url:$scope.rootPath+"/wp-json/ab/updateProjectJson"}).then(function(response){$scope.loadingOverlay=!1;var status=response.data.status,tokenIsValid=response.data.tokenIsValid;tokenIsValid?showAlert&&swal({allowOutsideClick:!0,title:"Saved!",type:"success",text:status,timer:1e3,showConfirmButton:!1}):showAlert&&swal({allowOutsideClick:!0,title:"Error!",type:"error",text:status,timer:1e3,showConfirmButton:!1})},function(response){return $scope.loadingOverlay=!1,!1});JSON.stringify($scope.aBMain);showAlert&&swal({allowOutsideClick:!0,title:"Saved!",type:"success",text:"Save Succesfull!",timer:1e3,showConfirmButton:!1})}},$scope.aBClear=function(){$scope.aBMain=new abFunc.aBMainOrig,$scope.aBIE=JSON.stringify($scope.aBMain),$localStorage.aBMain=$scope.aBIE,swal({allowOutsideClick:!0,title:"Cleared!",type:"success",text:"Everything Cleared!",timer:1e3,showConfirmButton:!1})},$scope.activatePage=function(urlPath){$scope.contentTemplate=urlPath,$scope.eShow=!1},$scope.radioOrientation=[{value:"h",label:"Horizontal"},{value:"v",label:"Vertical"}],$scope.addMainMenu=function(){var tThis=this;this.extraMenus.forEach(function(item){var newItem={};return newItem={label:item.label,type:item.type,name:item.name,unique:item.unique,children:[]},item.args&&(newItem.args=item.args),item.capability&&(newItem.capability=item.capability),item.handler&&(newItem.handler=item.handler,newItem.handler=abFunc.uniqueName(newItem.handler,$scope.aBMain.menus,1,"handler")),item.pageTitle&&(newItem.pageTitle=item.pageTitle,newItem.pageTitle=abFunc.uniqueName(newItem.pageTitle,$scope.aBMain.menus,1,"pageTitle")),newItem.name=abFunc.uniqueName(newItem.name,$scope.aBMain.menus),newItem.label=abFunc.uniqueName(newItem.label,$scope.aBMain.menus,1,"label"),item.type===tThis.menuAdd?void $scope.aBMain.menus.push(newItem):void 0}),this.menuAdd="default"},$scope.showEditSettings=function(index){return void 0!==index&&"undefined"!=typeof $scope.aBMain.menus[index]?!$scope.aBMain.menus[index].unique:!1},$scope.editMainSettings=function(index){$scope.menuEditSettShow?$scope.mainContainer="templates/metaboxContainer-0.1.5.html":$scope.mainContainer="templates/menuSettings.html",$scope.menuEditSettShow=!$scope.menuEditSettShow},$scope.abRemoveArr=function(xArr,index){xArr.splice(index,1)},$scope.abRemoveCPT=function(xArr,index){$scope.abRemoveArr(xArr,index),$scope.menuEditSettShow=!$scope.menuEditSettShow,$scope.mainContainer="templates/metaboxContainer-0.1.5.html"},$scope.singleChild=function(pArr,label){return"cPage"!==pArr.type?!0:pArr.children.length>1},$scope.dinamicLabel=function(tArr,label){return"cPage"===tArr.type&&1===tArr.children.length?"Single Page Content":label},$scope.exportPHP=function(exportType){var downloadURL=$scope.rootPath+"?pID="+$scope.projectID+"&dType="+exportType+"&download=true";OpenInNewTab(downloadURL)},$scope.putSource=function(menu,tab,field){var menuType=menu.type,tabName=(menu.name,tab.name),fieldName=field.name,final="";switch(menuType){case"cPage":final="$"+fieldName+" = get_option('abOption_"+menuType+tabName+fieldName+"',false);";break;default:final="$"+fieldName+' = get_post_meta(get_the_ID(),"abMB_'+menuType+tabName+fieldName+'",true);'}return final},$scope.editShow=function(index,types){var typesArr=types.split(","),fBool=!1;return typesArr.forEach(function(item,i){$scope.aBMain.menus[index].type===item&&(fBool=!0)}),fBool},$scope.varHasValue=function(variable,value){return variable==value},Object.toparams=function(obj){var p=[];for(var key in obj)p.push(key+"="+encodeURIComponent(obj[key]));return p.join("&")},$scope.abLogin=function(){var lEmail=this.lEmail,lPassword=this.lPassword,postData={lUser:lEmail,lPassword:lPassword};return""===lEmail||""===lPassword?(""===lEmail&&this.loginForm.loginEmail.$setValidity("unique",!1),""===lPassword&&this.loginForm.loginPassword.$setValidity("unique",!1),swal({allowOutsideClick:!0,title:"Saved!",type:"success",text:"Please complete the required fields",timer:1e3,showConfirmButton:!1}),!0):($scope.loadingOverlay=!0,this.projectID=null,void $http({method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$httpParamSerializerJQLike(postData),url:$scope.rootPath+"/wp-json/ab/Login",cache:!1}).then(function(response){$scope.loadingOverlay=!1;var fToken=response.data.finalToken,iLogin=response.data.invalidLogin;iLogin&&swal({allowOutsideClick:!0,title:"Error!",type:"error",text:"Username and password not valid, please try again",timer:1e3,showConfirmButton:!1}),iLogin||(debug&&console.log("login credentials are valid!"),$localStorage.loginToken=fToken,$scope.vHeader=!0,$location.path("projects"),swal({allowOutsideClick:!0,title:"Logged in",type:"success",text:"succesfully logged in!",timer:1e3,showConfirmButton:!1}))},function(response){$scope.vHeader=!1,$scope.loadingOverlay=!1}))},$scope.validatePass=function(type){type="undefined"!=typeof type?type:!0;var lPassword=this.lPassword,lPassword2=this.lPassword2;return debug&&console.log(lPassword+"-"+lPassword2),lPassword===lPassword2?(type?this.registerForm&&(this.registerForm.$setValidity("unique",!0),this.registerForm.lPassword.$setValidity("unique",!0),this.registerForm.lPassword2.$setValidity("unique",!0)):this.resetPassword&&(this.resetPassword.$setValidity("unique",!0),this.resetPassword.lPassword.$setValidity("unique",!0),this.resetPassword.lPassword2.$setValidity("unique",!0)),!0):(type?this.registerForm&&(this.registerForm.lPassword.$setValidity("unique",!1),this.registerForm.lPassword2.$setValidity("unique",!1),this.registerForm.$setValidity("unique",!1)):this.resetPassword&&(this.resetPassword.lPassword.$setValidity("unique",!1),this.resetPassword.lPassword2.$setValidity("unique",!1),this.resetPassword.$setValidity("unique",!1)),!1)},$scope.validateEmail=function(){return debug&&console.log($scope.lEmail.valid),!1},$scope.changeValidity=function(tObj){tObj.$setValidity("unique",!0)},$scope.abRegister=function(){var emailNotEmpty=0!==this.lEmail.length;emailNotEmpty?this.registerForm.lEmail.$setValidity("unique",!0):this.registerForm.lEmail.$setValidity("unique",!1);var passNotEmpty=0!==this.lPassword.length;if(passNotEmpty||(this.registerForm.lPassword.$setValidity("unique",!1),this.registerForm.lPassword2.$setValidity("unique",!1)),this.registerForm.lEmail.$valid&&this.registerForm.lPassword.$valid&&this.registerForm.lPassword2.$valid&&this.registerForm.$setValidity("unique",!0),debug&&(console.log(this.registerForm.$valid),console.log(this.registerForm.$valid+"-"+emailNotEmpty+"-"+passNotEmpty),console.log("Email Valid:"+this.registerForm.lEmail.$valid),console.log("Pass Valid:"+this.registerForm.lPassword.$valid),console.log("Pass2 Valid:"+this.registerForm.lPassword2.$valid)),this.registerForm.$valid&&emailNotEmpty&&passNotEmpty){var lEmail=this.lEmail,lPassword=this.lPassword;$scope.loadingOverlay=!0;var postData={lUser:lEmail,lPassword:lPassword};return $http({method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$httpParamSerializerJQLike(postData),url:$scope.rootPath+"/wp-json/ab/Register",cache:!1}).then(function(response){$scope.loadingOverlay=!1;var status=response.data.status,error=response.data.error;status&&($scope.contentTemplate="templates/login-0.1.4.html",$scope.lEmail=lEmail,$scope.lPassword=lPassword,$scope.abLogin()),error&&swal({allowOutsideClick:!0,title:"Error",type:"error",text:error,timer:1e3,showConfirmButton:!1})},function(response){$scope.loadingOverlay=!1}),!0}return swal({allowOutsideClick:!0,title:"Error",type:"error",text:"Form does not validate! Please make sure the email and passwords are validating. Password needs to be strong. letters, numbers and special characters.[0-9],[a-z], [!@#$%^&*] min 8 characters. Or generate random Password",timer:4e3,showConfirmButton:!1}),!1},$scope.logOut=function(){$scope.saveSettings(!1),delete $localStorage.loginToken,$scope.projectID=null,$scope.vHeader=!1,$location.path("login")},$scope.abResetPassword=function(){var validate=!0;""!==this.lEmail&&this.resetPassword.lEmail.$valid||(this.resetPassword.lEmail.$setValidity("unique",!1),validate=!1),this.resetPassword.lPassword.$valid&&this.resetPassword.lPassword2.$valid&&""!==this.lPassword||(this.resetPassword.lPassword.$setValidity("unique",!1),this.resetPassword.lPassword2.$setValidity("unique",!1),validate=!1);var newPassword=!1;if(!validate)return swal({allowOutsideClick:!0,title:"Invalid Form!",type:"error",text:"Form does not validate. Make sure the passwords match and the email is of correct format",timer:1e3,showConfirmButton:!1}),!1;newPassword="undefined"!=typeof this.lPassword?this.lPassword:!1,$scope.loadingOverlay=!0;var postData={lEmail:this.lEmail};newPassword!==!1&&(postData.newPassword=newPassword),$http({method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$httpParamSerializerJQLike(postData),url:$scope.rootPath+"/wp-json/ab/resetPassword"}).then(function(response){$scope.loadingOverlay=!1;var validity=response.data.validity,status=response.data.status;validity?swal({allowOutsideClick:!0,title:"Success!",type:"success",text:status,timer:1e3,showConfirmButton:!1}):swal({allowOutsideClick:!0,title:"Error!",type:"error",text:status,timer:1e3,showConfirmButton:!1})},function(response){return $scope.loadingOverlay=!1,!1})},$scope.generatePassword=function(){var pLen=2;charset="abcdefghijklmnopqrstuvwxyz",charsetB="ABCDEFGHIJKLMNOPQRSTUVXYZ",charsetC="123456789",charsetD="!@#$%^&*",retVal="";for(var i=0;pLen>i;++i){var n=charset.length;retVal+=charset.charAt(Math.floor(Math.random()*n)),n=charsetB.length,retVal+=charsetB.charAt(Math.floor(Math.random()*n)),n=charsetC.length,retVal+=charsetC.charAt(Math.floor(Math.random()*n)),n=charsetD.length,retVal+=charsetD.charAt(Math.floor(Math.random()*n))}return this.lPassword=retVal,this.lPassword2=retVal,this.strongPassword=retVal,this.registerForm.lPassword.$setValidity("unique",!0),this.registerForm.lPassword2.$setValidity("unique",!0),retVal},$scope.vToken=function(functionName,redirectPath){if(null===$localStorage.loginToken)return debug&&console.log("loginToken is null"),!1;$scope.loadingOverlay=!0;var postData={abToken:$localStorage.loginToken};$http({method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$httpParamSerializerJQLike(postData),url:$scope.rootPath+"/wp-json/ab/validateToken"}).then(function(response){$scope.loadingOverlay=!1;var tokenReturn=response.data;tokenReturn?(debug&&(console.log("*token is valid*"),console.log("Accesing function "+functionName)),runFunction(functionName)):(debug&&(console.log("*token NOT valid*"),console.log("Going to path: "+redirectPath)),$location.path(redirectPath))},function(response){$location.path(redirectPath)})};var runFunction=function(functionName){switch(functionName){case"ftlLogin":$scope.ftlLogin();break;case"ftlAllProjects":$scope.ftlAllProjects();break;case"ftlEditProject":$scope.ftlEditProject();break;case"ftlLoadProject":$scope.ftlLoadProject();break;case"ftlAccount":$scope.ftlAccount();break;case"ftlContact":$scope.ftlContact();break;case"ftltermsAndConditions":$scope.ftltermsAndConditions()}};$scope.createNewProject=function(alertShow){if($scope.aBClear(),$scope.aBMain=new abFunc.aBMainOrig,alertShow="undefined"!=typeof alertShow?alertShow:!1,$scope.pEdit=!1,delete $scope.pEditID,""===this.newProjectName&&this.newProjectForm)return this.newProjectForm.newProjectName.$setValidity("unique",!1),!1;$scope.loadingOverlay=!0;var newJson=JSON.stringify($scope.aBMain),postData={pName:this.newProjectName,type:"new",pDesc:this.newProjectDescription,jsonSetting:newJson,abToken:$localStorage.loginToken};$http({method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$httpParamSerializerJQLike(postData),url:$scope.rootPath+"/wp-json/ab/addProject"}).then(function(response){$scope.aBMain=new abFunc.aBMainOrig,$scope.loadingOverlay=!1;var status=response.data.status,pAdded=response.data.pAdded,pID=response.data.pID;debug&&console.log("Project was added? : "+pAdded),pAdded?($scope.aBMain=new abFunc.aBMainOrig,$scope.projectID=pID,$scope.aBMain=new abFunc.aBMainOrig,$location.path("project/"+pID),alertShow&&swal({allowOutsideClick:!0,title:"Project Created!",type:"success",text:status,timer:1e3,showConfirmButton:!1})):swal({allowOutsideClick:!0,title:"Error!",type:"error",text:status,timer:1e3,showConfirmButton:!1})},function(response){return $scope.loadingOverlay=!1,!1})},$scope.ftlAllProjects=function(){$scope.vHeader=!0,$scope.openProjects()},$scope.ftlAccount=function(alertShow){alertShow="undefined"!=typeof alertShow?alertShow:!1,$scope.vHeader=!0;var postData={abToken:$localStorage.loginToken};$http({method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$httpParamSerializerJQLike(postData),url:$scope.rootPath+"/wp-json/ab/getAccountData"}).then(function(response){$scope.loadingOverlay=!1;var status=response.data.status,fStatus=response.data.fStatus,uEmail=(response.data.uID,response.data.uEmail),familyName=response.data.familyName,givenName=response.data.givenName,website=response.data.website,shortBio=response.data.shortBio;debug&&console.log("Account data returned successfully "),fStatus?($scope.familyName=familyName,$scope.givenName=givenName,$scope.website=website,$scope.shortBio=shortBio,$scope.uEmail=uEmail,alertShow&&swal({allowOutsideClick:!0,title:"Account Data Loaded",type:"success",text:status,timer:1e3,showConfirmButton:!1})):swal({allowOutsideClick:!0,title:"Error!",type:"error",text:status,timer:1e3,showConfirmButton:!1})},function(response){return $scope.loadingOverlay=!1,!1})},$scope.ftlContact=function(){$scope.vHeader=!0},$scope.ftltermsAndConditions=function(){$scope.vHeader=!0},$scope.updateAccount=function(){$scope.vHeader=!0;var postData={abToken:$localStorage.loginToken,familyName:this.familyName,givenName:this.givenName,website:this.website,shortBio:this.shortBio};$http({method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$httpParamSerializerJQLike(postData),url:$scope.rootPath+"/wp-json/ab/updateAccountData"}).then(function(response){$scope.loadingOverlay=!1;var status=response.data.status,fStatus=response.data.fStatus;fStatus?(debug&&console.log("Account data updated successfully "),swal({allowOutsideClick:!0,title:"Account Updated",type:"success",text:status,timer:1e3,showConfirmButton:!1})):swal({allowOutsideClick:!0,title:"Error!",type:"error",text:status,timer:1e3,showConfirmButton:!1})},function(response){return $scope.loadingOverlay=!1,!1})},$scope.sendContact=function(){debug&&console.log("trying to send contact form"),$scope.vHeader=!0;var postData={abToken:$localStorage.loginToken,cSubject:this.cSubject,cMessage:this.cMessage};$http({method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$httpParamSerializerJQLike(postData),url:$scope.rootPath+"/wp-json/ab/sendContactForm"}).then(function(response){$scope.loadingOverlay=!1;var status=response.data.status,fStatus=response.data.fStatus;fStatus?(debug&&console.log("Account data updated successfully "),swal({allowOutsideClick:!0,title:"Message Sent!",type:"success",text:status,timer:1e3,showConfirmButton:!1}),$scope.abGoTo("account")):swal({allowOutsideClick:!0,title:"Error!",type:"error",text:status,timer:1e3,showConfirmButton:!1})},function(response){return $scope.loadingOverlay=!1,!1})},$scope.contactCall=function(){$scope.abGoTo("contact")},$scope.accResPass=function(){var uEmail=$scope.uEmail;$location.path("resetPassword"),$scope.lEmail=uEmail},$scope.ftlLoadProject=function(){$scope.aBMain=new abFunc.aBMainOrig,$scope.vHeader=!0,$scope.loadProject()},$scope.ftlEditProject=function(){$scope.vHeader=!0;var pID=$routeParams.id;$scope.editProject(pID)},$scope.loadProject=function(alertShow){alertShow="undefined"!=typeof alertShow?alertShow:!1;var pID=$routeParams.id;$scope.selMI=null,$scope.projectID=pID,$scope.loadingOverlay=!0;var postData={abToken:$localStorage.loginToken,pID:pID};$http({method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$httpParamSerializerJQLike(postData),url:$scope.rootPath+"/wp-json/ab/loadProject"}).then(function(response){debug&&(console.log("loadProject Response:"),console.log(response)),$scope.loadingOverlay=!1;var status=response.data.status,tokenIsValid=response.data.tokenIsValid,pJson=response.data.pJson;tokenIsValid?(debug&&console.log("Project ID:"+pID+" Loaded"),$scope.aBMain=JSON.parse(pJson),debug&&console.log($scope.aBMain)):swal({allowOutsideClick:!0,title:"Error!",type:"error",text:status,timer:1e3,showConfirmButton:!1})},function(response){return $scope.loadingOverlay=!1,!1})},$scope.abCompareProjects=function(pID){return this.projectID===pID},$scope.openProjects=function(alertShow){alertShow="undefined"!=typeof alertShow?alertShow:!1,$scope.loadingOverlay=!0;var postData={
abToken:$localStorage.loginToken};$http({method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$httpParamSerializerJQLike(postData),url:$scope.rootPath+"/wp-json/ab/projectsList"}).then(function(response){$scope.loadingOverlay=!1;var status=response.data.status,userProjects=response.data.projects;debug&&(console.log("user Projects:"),console.log(userProjects)),$scope.userProjects=userProjects,status?alertShow&&swal({allowOutsideClick:!0,title:"Projects Opened!",type:"success",text:status,timer:1e3,showConfirmButton:!1}):swal({allowOutsideClick:!0,title:"Error!",type:"error",text:status,timer:1e3,showConfirmButton:!1})},function(response){return $scope.loadingOverlay=!1,!1})},$scope.newProjectTemplate=function(){$scope.newProjectName="",$scope.newProjectDescription="",$scope.pEdit=!1,$location.path("newProject")},$scope.deleteProject=function(alertShow,pIDObj){alertShow="undefined"!=typeof alertShow?alertShow:!1;var pID="undefined"!=typeof pIDObj?pIDObj:$scope.pEditID;if(null!==pID){debug&&console.log("deleting "+pID),$scope.loadingOverlay=!0;var postData={abToken:$localStorage.loginToken,pID:pID};$http({method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$httpParamSerializerJQLike(postData),url:$scope.rootPath+"/wp-json/ab/deleteProject"}).then(function(response){$scope.loadingOverlay=!1;var status=response.data.status,fStatus=(response.data.tokenIsValid,response.data.fStatus);fStatus?alertShow&&swal({allowOutsideClick:!0,title:"Project Deleted!",type:"success",text:status,timer:1e3,showConfirmButton:!1}):swal({allowOutsideClick:!0,title:"Error Deleting Project!",type:"error",text:status,timer:1e3,showConfirmButton:!1}),$scope.ftlAllProjects()},function(response){return $scope.loadingOverlay=!1,!1})}},$scope.editProject=function(pID){$scope.pEdit=!0,$scope.pEditID=pID,$scope.loadingOverlay=!0;var postData={abToken:$localStorage.loginToken,pID:pID};$http({method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$httpParamSerializerJQLike(postData),url:$scope.rootPath+"/wp-json/ab/loadProject"}).then(function(response){$scope.loadingOverlay=!1;var tokenIsValid=(response.data.status,response.data.tokenIsValid),pTitle=response.data.pTitle,pDescr=response.data.pDescr;debug&&console.log(pTitle),tokenIsValid&&($scope.newProjectName=pTitle,$scope.newProjectDescription=pDescr)},function(response){return $scope.loadingOverlay=!1,!1})},$scope.updateProject=function(){var pID=$routeParams.id;debug&&console.log($scope.pEditID),$scope.loadingOverlay=!0;var postData={abToken:$localStorage.loginToken,pID:$scope.pEditID,pTitle:this.newProjectName,pDescr:this.newProjectDescription};$http({method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$httpParamSerializerJQLike(postData),url:$scope.rootPath+"/wp-json/ab/updateProjectInfo"}).then(function(response){$scope.loadingOverlay=!1;var status=response.data.status,tokenIsValid=response.data.tokenIsValid;tokenIsValid?(swal({allowOutsideClick:!0,title:"Project Updated!",type:"success",text:status,timer:1e3,showConfirmButton:!1}),$scope.abGoTo("project/"+pID)):swal({allowOutsideClick:!0,title:"Error Updating Project!",type:"error",text:status,timer:1e3,showConfirmButton:!1})},function(response){return $scope.loadingOverlay=!1,!1})},$scope.isInPath=function(path){var tempPath=$location.path();return-1!==tempPath.indexOf(path)},$scope.ftlLogin=function(){$scope.vHeader=!0,$location.path("projects")},$scope.fieldOptionsOriginal=[{type:"default",label:"Select a Field to add"},{type:"textbox",name:"textbox",label:"TextBox",description:"Default TextBox Description text"},{type:"textarea",name:"textarea",label:"TextArea",description:"Default TextArea Description text"},{type:"select",name:"select",label:"Select",description:"Default Select Description text",selectType:"custom",oArr:[]},{type:"radio",name:"radio",label:"Radio Buttons",description:"Default Radio Buttons Description text",orientation:"h",radioType:"custom",oArr:[]},{type:"checkbox",name:"checkbox",label:"Checkbox",description:"Default checkbox Description text",extraText:"the text that goes at the right of the checkbox"},{type:"datepicker",name:"datepicker",label:"Datepicker",description:"Default datepicker Description text",format:"mm/dd/YY"},{type:"timepicker",name:"timepicker",label:"Timepicker",description:"Default timepicker Description text",format:"H:i:s"},{type:"colorpicker",name:"colorpicker",label:"Colorpicker",description:"Default colorpicker Description text",format:"hex",opacity:!0},{type:"upload",name:"upload",label:"Media Upload",description:"Default Media Upload Description text",tSizes:[]},{type:"bootstrapIcons",name:"bootstrapIcons",label:"BootStrap Icons",description:"Default Bootstrap Icons Description text",tSizes:[]}],$scope.customizerFieldOptions=[{type:"default",label:"Select a Field to add"},{type:"text",name:"Textbox",label:"Textbox",description:"Simple default TextBox"},{type:"color",name:"color",label:"Color Picker"},{type:"upload",name:"upload",label:"Media upload Button"},{type:"textarea",name:"textarea",label:"Textarea"},{type:"dropdown-pages",name:"dropdown-pages",label:"Dropdown pages"}],$scope.fieldOptions=$scope.fieldOptionsOriginal,$scope.mBContext=[{value:"normal",label:"Normal"},{value:"side",label:"Side"}],$scope.mBPriority=[{value:"default",label:"Default"},{value:"high",label:"High"},{value:"low",label:"Low"}],$scope.rRMethods=[{value:"get",label:"GET"},{value:"post",label:"POST"}],$scope.selectTypes=[{value:"custom",label:"Custom"},{value:"categories",label:"Categories"},{value:"tags",label:"Tags"},{value:"posts",label:"Posts"},{value:"pages",label:"Pages"},{value:"users",label:"Users"}],$scope.dateFormats=[{value:"mm/dd/YY",label:"mm/dd/YY"},{value:"mm/dd/YYYY",label:"mm/dd/YYYY"},{value:"dd/mm/YY",label:"dd/mm/YY"},{value:"dd/mm/YYYY",label:"dd/mm/YYYY"},{value:"YY/mm/dd",label:"YY/mm/dd"},{value:"YY/dd/mm",label:"YY/dd/mm"},{value:"YYYY/mm/dd",label:"YYYY/mm/dd"},{value:"YYYY/dd/mm",label:"YYYY/dd/mm"}],$scope.timeFormats=[{value:"H:i:s",label:"H:i:s"},{value:"H-i-s",label:"H-i-s"},{value:"H-i-s",label:"H-i-s"}],$scope.colorFormats=[{value:"hex",label:"Hexadecimal"},{value:"rgba",label:"RGBA"}],$scope.extraMenus=[{label:"Select an Option",type:"default",name:"default",unique:!1,children:[]},{label:"Custom Post Type",type:"cpt",name:"post_type",unique:!1,children:[],args:{label:"name",labels:"",description:"","public":!0,exclude_from_search:!0,publicly_queryable:!1,show_ui:!1,show_in_nav_menus:!1,show_in_menu:!1,show_in_admin_bar:!1,menu_icon:"",capability_type:"post",capabilities:["edit_post","read_post","delete_post","edit_others_posts","publish_posts","read_private_posts","read","delete_posts","delete_private_posts","delete_published_posts","delete_others_posts","edit_private_posts","edit_published_posts","create_posts"],map_meta_cap:"",hierarchical:!1,supports:["title","editor"],register_meta_box_cb:"",taxonomies:"",has_archive:!1,permalink_epmask:"EP_PERMALINK",rewrite:!0,query_var:!0,can_export:!0,show_in_rest:!1,rest_controller_class:"WP_REST_Posts_Controller",_builtin:!1}},{label:"Admin Page",type:"cPage",name:"cPage",unique:!1,pageTitle:"Custom Admin Page",pageDescription:"Custom Admin Page Description",capability:"manage_options",handler:"ab_menu_handler",children:[]}],$scope.loadSettings=function(){var abUrl=String(document.location.href);abUrl.indexOf("localhost")>0?$scope.rootPath="http://localhost:8888/wordpress":$scope.rootPath="http://server.admin-builder.com",$scope.eShow=!1},$scope.loadSettings()}])}();
//# sourceMappingURL=script.min.js.map